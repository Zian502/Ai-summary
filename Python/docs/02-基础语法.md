# 基础语法

## 变量和赋值

### 变量命名规则

Python 变量命名遵循以下规则：

```python
# 合法的变量名
name = "Python"
age = 30
user_name = "admin"  # 使用下划线
userName = "admin"   # 驼峰命名（不推荐，Python 推荐使用下划线）
_name = "private"    # 单下划线开头（约定为内部使用）
__name = "special"   # 双下划线开头（名称修饰）
PI = 3.14159         # 全大写表示常量（约定）

# 不合法的变量名
# 2name = "error"    # 不能以数字开头
# user-name = "error" # 不能包含连字符
# class = "error"     # 不能使用关键字
```

### 变量赋值

```python
# 单个变量赋值
x = 10
name = "Python"

# 多个变量同时赋值
a, b, c = 1, 2, 3
x, y = y, x  # 交换变量值（Python 特色）

# 链式赋值
a = b = c = 10  # 三个变量都赋值为 10

# 解包赋值
data = [1, 2, 3]
first, second, third = data  # first=1, second=2, third=3

# 带星号的解包（Python 3.5+）
first, *middle, last = [1, 2, 3, 4, 5]  # first=1, middle=[2,3,4], last=5
```

### 与其他语言对比

| 语言 | 变量声明 | 类型声明 |
|------|---------|---------|
| **Python** | `x = 10` | 无需声明，动态类型 |
| **Java** | `int x = 10;` | 必须声明类型 |
| **C++** | `int x = 10;` | 必须声明类型 |
| **JavaScript** | `let x = 10;` | 无需声明类型 |
| **Go** | `x := 10` | 类型推断 |

**Python 特点**：
- 无需声明变量类型
- 变量类型可以动态改变
- 赋值即创建（如果变量不存在）

## 常量

Python 没有真正的常量，但约定使用全大写命名表示常量：

```python
# 约定：全大写表示常量
PI = 3.14159
MAX_SIZE = 100
DEFAULT_TIMEOUT = 30

# 使用常量
radius = 5
area = PI * radius ** 2  # ** 表示幂运算
print(f"圆的面积: {area:.2f}")  # 输出: 圆的面积: 78.54
```

## 标识符和关键字

### Python 关键字

Python 3.12 的关键字列表：

```python
# 查看所有关键字
import keyword
print(keyword.kwlist)

# Python 3.12 关键字列表：
# ['False', 'None', 'True', '__peg_parser__', 'and', 'as', 'assert', 
#  'async', 'await', 'break', 'class', 'continue', 'def', 'del', 'elif', 
#  'else', 'except', 'finally', 'for', 'from', 'global', 'if', 'import', 
#  'in', 'is', 'lambda', 'nonlocal', 'not', 'or', 'pass', 'raise', 
#  'return', 'try', 'while', 'with', 'yield']
```

### 检查是否为关键字

```python
import keyword

print(keyword.iskeyword('if'))      # True
print(keyword.iskeyword('name'))    # False
```

## 缩进和代码块

Python 使用缩进表示代码块，这是 Python 的重要特性：

```python
# 正确的缩进（4 个空格或 1 个 Tab，推荐使用 4 个空格）
if True:
    print("这是 if 代码块")
    print("缩进相同，属于同一代码块")
    if True:
        print("嵌套代码块，需要更多缩进")

# 错误的缩进会导致 IndentationError
# if True:
# print("错误：没有缩进")
```

### 与其他语言对比

| 语言 | 代码块表示 | 示例 |
|------|-----------|------|
| **Python** | 缩进 | `if x: print(x)` |
| **Java/C++** | 花括号 `{}` | `if (x) { print(x); }` |
| **JavaScript** | 花括号 `{}` | `if (x) { print(x); }` |
| **Go** | 花括号 `{}` | `if x { print(x) }` |

**Python 优势**：
- 强制代码风格统一
- 代码更简洁美观
- 减少语法噪音

## 注释

```python
# 这是单行注释

"""
这是多行注释（文档字符串）
可以写多行内容
通常用于模块、类、函数的说明
"""

'''
这也是多行注释
单引号和双引号都可以
'''

def function():
    """这是函数的文档字符串（docstring）"""
    pass
```

## 语句和表达式

### 语句（Statement）

语句是执行操作的指令：

```python
# 赋值语句
x = 10

# 条件语句
if x > 5:
    print("x 大于 5")

# 循环语句
for i in range(5):
    print(i)

# 导入语句
import os
```

### 表达式（Expression）

表达式是产生值的代码：

```python
# 算术表达式
result = 10 + 5 * 2  # 结果为 20

# 比较表达式
is_greater = 10 > 5  # 结果为 True

# 函数调用表达式
length = len("Python")  # 结果为 6
```

### 一行多条语句

```python
# 使用分号分隔（不推荐，但可以使用）
x = 10; y = 20; z = x + y

# 推荐：每行一条语句
x = 10
y = 20
z = x + y
```

## 输入和输出

### 输出（print）

```python
# 基本输出
print("Hello, World!")

# 输出多个值（自动用空格分隔）
print("Hello", "World", "Python")  # 输出: Hello World Python

# 指定分隔符
print("Hello", "World", sep="-")  # 输出: Hello-World

# 指定结束符（默认是换行）
print("Hello", end="")
print("World")  # 输出: HelloWorld（不换行）

# 格式化输出（f-string，Python 3.6+，推荐）
name = "Python"
age = 30
print(f"名称: {name}, 年龄: {age}")  # 输出: 名称: Python, 年龄: 30

# 格式化输出（format 方法）
print("名称: {}, 年龄: {}".format(name, age))

# 格式化输出（% 格式化，旧式）
print("名称: %s, 年龄: %d" % (name, age))
```

### 输入（input）

```python
# 基本输入
name = input("请输入您的姓名: ")
print(f"您好, {name}!")

# 输入数字（需要类型转换）
age = int(input("请输入您的年龄: "))
print(f"您 {age} 岁了")

# 输入多个值
data = input("请输入两个数字（用空格分隔）: ")
a, b = map(int, data.split())
print(f"a = {a}, b = {b}")
```

### 与其他语言对比

| 语言 | 输出 | 输入 |
|------|------|------|
| **Python** | `print("Hello")` | `name = input("Name: ")` |
| **Java** | `System.out.println("Hello");` | `Scanner sc = new Scanner(System.in);` |
| **C++** | `std::cout << "Hello";` | `std::cin >> name;` |
| **JavaScript** | `console.log("Hello");` | `prompt("Name: ")` |

## 实际应用场景 Demo

### Demo 1: 用户信息收集程序

```python
#!/usr/bin/env python3
# user_info.py - 收集用户信息

def collect_user_info():
    """
    收集用户信息并格式化输出
    
    返回:
        用户信息字典
    """
    print("=" * 40)
    print("欢迎使用用户信息收集系统")
    print("=" * 40)
    
    # 收集基本信息
    name = input("请输入您的姓名: ").strip()  # strip() 去除首尾空格
    age = input("请输入您的年龄: ").strip()
    
    # 验证年龄是否为数字
    try:
        age = int(age)
        if age < 0 or age > 150:
            raise ValueError("年龄必须在 0-150 之间")
    except ValueError as e:
        print(f"错误: {e}")
        return None
    
    # 收集联系方式
    email = input("请输入您的邮箱: ").strip()
    phone = input("请输入您的电话: ").strip()
    
    # 构建用户信息字典
    user_info = {
        'name': name,
        'age': age,
        'email': email,
        'phone': phone
    }
    
    # 格式化输出
    print("\n" + "=" * 40)
    print("您输入的信息如下:")
    print("=" * 40)
    print(f"姓名: {user_info['name']}")
    print(f"年龄: {user_info['age']}")
    print(f"邮箱: {user_info['email']}")
    print(f"电话: {user_info['phone']}")
    print("=" * 40)
    
    return user_info

if __name__ == "__main__":
    collect_user_info()
```

**运行示例**：
```bash
python user_info.py
# 输出:
# ========================================
# 欢迎使用用户信息收集系统
# ========================================
# 请输入您的姓名: 张三
# 请输入您的年龄: 25
# 请输入您的邮箱: zhangsan@example.com
# 请输入您的电话: 13800138000
# 
# ========================================
# 您输入的信息如下:
# ========================================
# 姓名: 张三
# 年龄: 25
# 邮箱: zhangsan@example.com
# 电话: 13800138000
# ========================================
```

### Demo 2: 简单的计算器交互程序

```python
#!/usr/bin/env python3
# interactive_calc.py - 交互式计算器

def calculate(num1, operator, num2):
    """
    执行计算
    
    参数:
        num1: 第一个数字
        operator: 运算符
        num2: 第二个数字
    
    返回:
        计算结果
    """
    operators = {
        '+': lambda x, y: x + y,  # lambda 表达式定义匿名函数
        '-': lambda x, y: x - y,
        '*': lambda x, y: x * y,
        '/': lambda x, y: x / y if y != 0 else None,
        '**': lambda x, y: x ** y,  # 幂运算
        '%': lambda x, y: x % y if y != 0 else None,  # 取模
    }
    
    if operator not in operators:
        return None
    
    return operators[operator](num1, num2)

def main():
    """主函数"""
    print("=" * 50)
    print("欢迎使用交互式计算器")
    print("=" * 50)
    print("支持的运算符: +, -, *, /, ** (幂), % (取模)")
    print("输入 'quit' 或 'exit' 退出程序")
    print("=" * 50)
    
    while True:  # 无限循环，直到用户退出
        try:
            # 获取用户输入
            expression = input("\n请输入表达式 (例如: 10 + 5): ").strip()
            
            # 检查退出命令
            if expression.lower() in ['quit', 'exit', 'q']:
                print("感谢使用，再见！")
                break
            
            # 解析表达式（简单解析，不支持复杂表达式）
            parts = expression.split()
            if len(parts) != 3:
                print("错误: 请输入格式 '数字 运算符 数字'")
                continue
            
            num1_str, operator, num2_str = parts
            
            # 转换为数字
            num1 = float(num1_str)
            num2 = float(num2_str)
            
            # 执行计算
            result = calculate(num1, operator, num2)
            
            if result is None:
                if operator == '/' or operator == '%':
                    print("错误: 除数不能为0")
                else:
                    print(f"错误: 不支持的运算符 '{operator}'")
            else:
                # 格式化输出结果
                print(f"结果: {num1} {operator} {num2} = {result:.2f}")
                
        except ValueError:
            print("错误: 请输入有效的数字")
        except KeyboardInterrupt:
            # 捕获 Ctrl+C
            print("\n\n程序被中断，再见！")
            break
        except Exception as e:
            print(f"错误: {e}")

if __name__ == "__main__":
    main()
```

**运行示例**：
```bash
python interactive_calc.py
# ==================================================
# 欢迎使用交互式计算器
# ==================================================
# 支持的运算符: +, -, *, /, ** (幂), % (取模)
# 输入 'quit' 或 'exit' 退出程序
# ==================================================
# 
# 请输入表达式 (例如: 10 + 5): 10 + 5
# 结果: 10.0 + 5.0 = 15.00
# 
# 请输入表达式 (例如: 10 + 5): 10 ** 3
# 结果: 10.0 ** 3.0 = 1000.00
# 
# 请输入表达式 (例如: 10 + 5): quit
# 感谢使用，再见！
```

### Demo 3: 格式化输出工具

```python
#!/usr/bin/env python3
# format_demo.py - 格式化输出示例

def format_demo():
    """演示各种格式化输出方法"""
    
    name = "Python"
    version = 3.12
    score = 95.6789
    
    print("=" * 60)
    print("格式化输出示例")
    print("=" * 60)
    
    # 1. f-string（推荐，Python 3.6+）
    print("\n1. f-string 格式化:")
    print(f"语言: {name}, 版本: {version}, 评分: {score}")
    print(f"评分保留2位小数: {score:.2f}")
    print(f"评分百分比: {score:.1f}%")
    print(f"版本号右对齐（宽度10）: {version:>10}")
    print(f"名称左对齐（宽度10）: {name:<10}")
    print(f"名称居中（宽度10）: {name:^10}")
    
    # 2. format 方法
    print("\n2. format() 方法:")
    print("语言: {}, 版本: {}, 评分: {:.2f}".format(name, version, score))
    print("语言: {0}, 版本: {1}, 评分: {2:.2f}".format(name, version, score))
    print("语言: {lang}, 版本: {ver}, 评分: {scr:.2f}".format(
        lang=name, ver=version, scr=score))
    
    # 3. % 格式化（旧式，不推荐但常见）
    print("\n3. % 格式化:")
    print("语言: %s, 版本: %.1f, 评分: %.2f" % (name, version, score))
    
    # 4. 数字格式化
    print("\n4. 数字格式化:")
    number = 1234567.89
    print(f"千分位分隔: {number:,.2f}")
    print(f"科学计数法: {number:.2e}")
    print(f"十六进制: {255:x}")  # 小写
    print(f"十六进制: {255:X}")  # 大写
    print(f"二进制: {255:b}")
    print(f"八进制: {255:o}")
    
    # 5. 字符串格式化
    print("\n5. 字符串格式化:")
    text = "Python"
    print(f"填充字符: {text:*<10}")  # 左对齐，用 * 填充
    print(f"填充字符: {text:*>10}")  # 右对齐，用 * 填充
    print(f"填充字符: {text:*^10}")  # 居中，用 * 填充
    
    # 6. 日期时间格式化（需要导入 datetime）
    from datetime import datetime
    now = datetime.now()
    print("\n6. 日期时间格式化:")
    print(f"当前时间: {now:%Y-%m-%d %H:%M:%S}")
    print(f"当前日期: {now:%Y年%m月%d日}")

if __name__ == "__main__":
    format_demo()
```

**运行示例**：
```bash
python format_demo.py
# ============================================================
# 格式化输出示例
# ============================================================
# 
# 1. f-string 格式化:
# 语言: Python, 版本: 3.12, 评分: 95.6789
# 评分保留2位小数: 95.68
# 评分百分比: 95.7%
# 版本号右对齐（宽度10）:       3.12
# 名称左对齐（宽度10）: Python    
# 名称居中（宽度10）:   Python   
# ...
```

## 代码风格规范（PEP 8）

Python 官方代码风格指南（PEP 8）建议：

```python
# 1. 使用 4 个空格缩进（不要使用 Tab）
def function():
    if True:
        print("正确缩进")

# 2. 行长度不超过 79 个字符（注释不超过 72 个字符）
# 可以使用括号、反斜杠或隐式续行
long_string = (
    "这是一个很长的字符串"
    "可以分成多行"
)

# 3. 导入语句顺序：标准库 -> 第三方库 -> 本地库
import os          # 标准库
import sys

import requests    # 第三方库

from mymodule import something  # 本地库

# 4. 函数和类定义之间空两行
def function1():
    pass


def function2():
    pass

# 5. 类方法之间空一行
class MyClass:
    def method1(self):
        pass
    
    def method2(self):
        pass

# 6. 使用有意义的变量名
user_name = "admin"      # 推荐
un = "admin"             # 不推荐

# 7. 常量使用全大写
MAX_SIZE = 100
DEFAULT_TIMEOUT = 30
```

## 下一步

完成基础语法后，建议学习：
1. [数据类型](./03-数据类型.md) - Python 的各种数据类型
2. [控制结构](./04-控制结构.md) - 条件语句和循环语句

