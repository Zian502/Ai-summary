# 数据类型

Python 中的数据类型分为两大类：**基本类型**和**复合类型**。

## 基本类型

### 数字类型（Numeric Types）

#### 整数（int）

```python
# 整数（Python 3 中 int 没有大小限制）
x = 10
y = -5
z = 0

# 不同进制的整数
binary = 0b1010      # 二进制，值为 10
octal = 0o12         # 八进制，值为 10
hexadecimal = 0xA    # 十六进制，值为 10

# 大整数（自动处理）
big_number = 10 ** 100  # 10 的 100 次方

# 类型检查
print(type(x))       # <class 'int'>
print(isinstance(x, int))  # True
```

#### 浮点数（float）

```python
# 浮点数
x = 3.14
y = -0.5
z = 1.0

# 科学计数法
scientific = 1.23e4  # 12300.0
small = 1.23e-4      # 0.000123

# 浮点数精度问题（注意）
print(0.1 + 0.2)     # 0.30000000000000004（浮点数精度问题）

# 使用 decimal 模块处理精确小数
from decimal import Decimal
precise = Decimal('0.1') + Decimal('0.2')
print(precise)       # 0.3

# 类型检查
print(type(x))       # <class 'float'>
```

#### 复数（complex）

```python
# 复数
x = 3 + 4j           # 实部 3，虚部 4
y = complex(3, 4)    # 等价于 3 + 4j

# 访问实部和虚部
print(x.real)        # 3.0
print(x.imag)        # 4.0

# 共轭复数
print(x.conjugate()) # (3-4j)
```

#### 布尔类型（bool）

```python
# 布尔值（True 和 False）
is_active = True
is_deleted = False

# 布尔值实际上是整数的子类
print(True == 1)     # True
print(False == 0)    # True
print(True + True)   # 2

# 类型转换
print(bool(1))       # True
print(bool(0))       # False
print(bool(""))      # False（空字符串）
print(bool("text"))  # True（非空字符串）
print(bool([]))      # False（空列表）
print(bool([1]))     # True（非空列表）
```

### 字符串（str）

字符串是不可变序列类型。

```python
# 字符串定义
s1 = "单引号字符串"
s2 = '双引号字符串'
s3 = """多行字符串
可以换行
"""
s4 = '''这也是多行字符串'''

# 转义字符
escaped = "他说: \"你好\""  # 他说: "你好"
newline = "第一行\n第二行"  # 换行
tab = "列1\t列2"            # 制表符
raw = r"C:\Users\name"      # 原始字符串（不转义）

# 字符串操作
s = "Python"
print(len(s))                # 6（长度）
print(s[0])                  # 'P'（索引）
print(s[-1])                 # 'n'（负索引）
print(s[0:3])                # 'Pyt'（切片）
print(s + " Programming")    # 'Python Programming'（拼接）
print(s * 3)                 # 'PythonPythonPython'（重复）

# 字符串方法
s = "  Hello World  "
print(s.strip())             # 'Hello World'（去除首尾空格）
print(s.upper())             # '  HELLO WORLD  '（转大写）
print(s.lower())             # '  hello world  '（转小写）
print(s.replace("World", "Python"))  # '  Hello Python  '
print(s.split())             # ['Hello', 'World']（分割）
print("Python".startswith("Py"))    # True
print("Python".endswith("on"))       # True
print("Python".find("th"))           # 2（查找子串位置）

# 字符串格式化（f-string，推荐）
name = "Python"
version = 3.12
msg = f"{name} {version}"     # 'Python 3.12'

# 字符串格式化（format 方法）
msg = "{} {}".format(name, version)

# 字符串格式化（% 格式化）
msg = "%s %s" % (name, version)
```

### 与其他语言对比

| 语言 | 整数 | 浮点数 | 字符串 | 布尔值 |
|------|------|--------|--------|--------|
| **Python** | `int`（无限制） | `float` | `str`（不可变） | `bool` |
| **Java** | `int`, `long` | `float`, `double` | `String`（不可变） | `boolean` |
| **C++** | `int`, `long` | `float`, `double` | `std::string` | `bool` |
| **JavaScript** | `Number` | `Number` | `String` | `Boolean` |

## 复合类型

### 列表（list）

列表是可变的序列类型。

```python
# 创建列表
numbers = [1, 2, 3, 4, 5]
mixed = [1, "hello", 3.14, True]  # 可以包含不同类型
empty = []                         # 空列表
nested = [[1, 2], [3, 4]]          # 嵌套列表

# 使用 list() 构造函数
numbers = list(range(5))           # [0, 1, 2, 3, 4]

# 列表操作
numbers = [1, 2, 3]
print(len(numbers))                 # 3（长度）
print(numbers[0])                   # 1（索引）
print(numbers[-1])                  # 3（负索引）
print(numbers[0:2])                 # [1, 2]（切片）

# 修改列表（可变）
numbers[0] = 10                     # [10, 2, 3]
numbers.append(4)                   # [10, 2, 3, 4]（追加）
numbers.insert(1, 5)                # [10, 5, 2, 3, 4]（插入）
numbers.extend([6, 7])              # [10, 5, 2, 3, 4, 6, 7]（扩展）
numbers.remove(5)                   # [10, 2, 3, 4, 6, 7]（删除第一个匹配项）
del numbers[0]                      # [2, 3, 4, 6, 7]（删除指定索引）
popped = numbers.pop()              # 7，numbers = [2, 3, 4, 6]（弹出最后一个）
popped = numbers.pop(0)             # 2，numbers = [3, 4, 6]（弹出指定索引）

# 列表方法
numbers = [3, 1, 4, 1, 5]
numbers.sort()                      # [1, 1, 3, 4, 5]（原地排序）
sorted_nums = sorted(numbers)      # 返回新列表，不修改原列表
numbers.reverse()                   # [5, 4, 3, 1, 1]（反转）
numbers.count(1)                    # 2（计数）
numbers.index(4)                    # 1（查找索引）

# 列表推导式（List Comprehension）
squares = [x**2 for x in range(10)]           # [0, 1, 4, 9, 16, ...]
evens = [x for x in range(10) if x % 2 == 0]  # [0, 2, 4, 6, 8]
```

### 元组（tuple）

元组是不可变的序列类型。

```python
# 创建元组
point = (1, 2)
coordinates = (10, 20, 30)
single = (42,)                      # 单元素元组（注意逗号）
empty = ()                          # 空元组

# 也可以不使用括号（逗号分隔）
point = 1, 2                        # (1, 2)

# 元组操作（类似列表，但不可变）
point = (1, 2, 3)
print(len(point))                   # 3
print(point[0])                     # 1
print(point[0:2])                   # (1, 2)

# 元组解包
x, y = (1, 2)                       # x=1, y=2
x, y, z = 1, 2, 3                   # x=1, y=2, z=3
x, *rest = (1, 2, 3, 4)            # x=1, rest=[2, 3, 4]

# 元组方法
point = (1, 2, 1, 3, 1)
print(point.count(1))               # 3（计数）
print(point.index(2))               # 1（查找索引）

# 元组的优势：不可变性，可以作为字典的键
key = (1, 2)
d = {key: "value"}
```

### 字典（dict）

字典是键值对映射类型。

```python
# 创建字典
person = {"name": "Python", "age": 30}
person = dict(name="Python", age=30)  # 等价写法
empty = {}                            # 空字典

# 访问字典
print(person["name"])                 # 'Python'
print(person.get("name"))             # 'Python'（安全访问）
print(person.get("email", "N/A"))     # 'N/A'（默认值）

# 修改字典
person["age"] = 31                    # 修改值
person["email"] = "python@example.com"  # 添加新键值对
person.update({"city": "Beijing", "country": "China"})  # 批量更新

# 删除字典元素
del person["email"]                   # 删除键值对
email = person.pop("email", None)     # 弹出并返回（带默认值）

# 字典方法
person = {"name": "Python", "age": 30}
print(person.keys())                  # dict_keys(['name', 'age'])
print(person.values())                # dict_values(['Python', 30])
print(person.items())                # dict_items([('name', 'Python'), ('age', 30)])

# 遍历字典
for key in person:
    print(key, person[key])

for key, value in person.items():
    print(key, value)

# 字典推导式
squares = {x: x**2 for x in range(5)}  # {0: 0, 1: 1, 2: 4, 3: 9, 4: 16}
```

### 集合（set）

集合是无序、不重复元素的集合。

```python
# 创建集合
numbers = {1, 2, 3, 4, 5}
numbers = set([1, 2, 3, 4, 5])      # 从列表创建
empty = set()                        # 空集合（注意：不能用 {}，那是字典）

# 集合操作
numbers = {1, 2, 3}
numbers.add(4)                       # {1, 2, 3, 4}（添加元素）
numbers.remove(2)                    # {1, 3, 4}（删除元素，不存在会报错）
numbers.discard(5)                   # {1, 3, 4}（删除元素，不存在不报错）
popped = numbers.pop()               # 弹出任意元素

# 集合运算
a = {1, 2, 3, 4}
b = {3, 4, 5, 6}

print(a | b)                         # {1, 2, 3, 4, 5, 6}（并集）
print(a & b)                         # {3, 4}（交集）
print(a - b)                         # {1, 2}（差集）
print(a ^ b)                         # {1, 2, 5, 6}（对称差集）

# 集合方法
a.union(b)                           # 并集（返回新集合）
a.intersection(b)                    # 交集
a.difference(b)                      # 差集
a.symmetric_difference(b)            # 对称差集

# 集合推导式
squares = {x**2 for x in range(5)}   # {0, 1, 4, 9, 16}
```

### 与其他语言对比

| 语言 | 列表/数组 | 字典/映射 | 集合 |
|------|----------|----------|------|
| **Python** | `list`（可变） | `dict` | `set` |
| **Java** | `ArrayList`, `List` | `HashMap`, `Map` | `HashSet`, `Set` |
| **C++** | `std::vector` | `std::map`, `std::unordered_map` | `std::set`, `std::unordered_set` |
| **JavaScript** | `Array` | `Object`, `Map` | `Set` |

## 类型转换

```python
# 数字类型转换
x = int(3.14)        # 3（浮点转整数）
y = float(10)        # 10.0（整数转浮点）
z = complex(3, 4)    # (3+4j)（创建复数）

# 字符串转换
s = str(123)         # '123'（数字转字符串）
n = int("123")       # 123（字符串转整数）
f = float("3.14")    # 3.14（字符串转浮点）

# 列表、元组、集合转换
lst = list((1, 2, 3))        # [1, 2, 3]（元组转列表）
tup = tuple([1, 2, 3])      # (1, 2, 3)（列表转元组）
s = set([1, 2, 2, 3])       # {1, 2, 3}（列表转集合，去重）

# 字典转换
d = dict([("a", 1), ("b", 2)])  # {'a': 1, 'b': 2}
```

## 类型检查

```python
# 使用 type() 函数
x = 10
print(type(x))                    # <class 'int'>
print(type(x) == int)             # True

# 使用 isinstance() 函数（推荐）
print(isinstance(x, int))         # True
print(isinstance(x, (int, float)))  # True（检查多个类型）

# 使用类型注解（Python 3.5+）
def add(a: int, b: int) -> int:
    return a + b

# 类型注解（Python 3.9+）
from typing import List, Dict, Optional

def process_items(items: List[str]) -> Dict[str, int]:
    return {item: len(item) for item in items}
```

## 实际应用场景 Demo

### Demo 1: 学生成绩管理系统

```python
#!/usr/bin/env python3
# student_grades.py - 学生成绩管理系统

def calculate_statistics(grades):
    """
    计算成绩统计信息
    
    参数:
        grades: 成绩列表
    
    返回:
        包含统计信息的字典
    """
    if not grades:
        return {
            'count': 0,
            'average': 0,
            'max': 0,
            'min': 0,
            'passed': 0,
            'failed': 0
        }
    
    # 计算统计值
    count = len(grades)
    average = sum(grades) / count
    max_grade = max(grades)
    min_grade = min(grades)
    
    # 统计及格和不及格人数（假设 60 分为及格线）
    passed = sum(1 for grade in grades if grade >= 60)
    failed = count - passed
    
    return {
        'count': count,
        'average': round(average, 2),
        'max': max_grade,
        'min': min_grade,
        'passed': passed,
        'failed': failed
    }

def main():
    """主函数"""
    # 使用字典存储学生信息
    students = {
        '001': {'name': '张三', 'grades': [85, 90, 78, 92]},
        '002': {'name': '李四', 'grades': [65, 70, 58, 72]},
        '003': {'name': '王五', 'grades': [95, 88, 92, 90]},
        '004': {'name': '赵六', 'grades': [45, 50, 55, 48]},
    }
    
    print("=" * 60)
    print("学生成绩管理系统")
    print("=" * 60)
    
    # 显示每个学生的成绩和统计信息
    for student_id, info in students.items():
        name = info['name']
        grades = info['grades']
        stats = calculate_statistics(grades)
        
        print(f"\n学号: {student_id}, 姓名: {name}")
        print(f"  成绩: {grades}")
        print(f"  平均分: {stats['average']}")
        print(f"  最高分: {stats['max']}")
        print(f"  最低分: {stats['min']}")
        print(f"  及格: {stats['passed']} 门, 不及格: {stats['failed']} 门")
    
    # 计算全班统计
    all_grades = []
    for info in students.values():
        all_grades.extend(info['grades'])
    
    class_stats = calculate_statistics(all_grades)
    
    print("\n" + "=" * 60)
    print("全班统计信息")
    print("=" * 60)
    print(f"总人数: {len(students)}")
    print(f"总成绩数: {class_stats['count']}")
    print(f"全班平均分: {class_stats['average']}")
    print(f"全班最高分: {class_stats['max']}")
    print(f"全班最低分: {class_stats['min']}")
    print(f"及格人数: {class_stats['passed']}")
    print(f"不及格人数: {class_stats['failed']}")

if __name__ == "__main__":
    main()
```

**运行示例**：
```bash
python student_grades.py
# ============================================================
# 学生成绩管理系统
# ============================================================
# 
# 学号: 001, 姓名: 张三
#   成绩: [85, 90, 78, 92]
#   平均分: 86.25
#   最高分: 92
#   最低分: 78
#   及格: 4 门, 不及格: 0 门
# ...
```

### Demo 2: 文本分析工具

```python
#!/usr/bin/env python3
# text_analyzer.py - 文本分析工具

def analyze_text(text):
    """
    分析文本的统计信息
    
    参数:
        text: 要分析的文本
    
    返回:
        包含统计信息的字典
    """
    # 基本统计
    char_count = len(text)
    word_count = len(text.split())
    line_count = len(text.splitlines())
    
    # 字符频率统计
    char_freq = {}
    for char in text.lower():
        if char.isalpha():  # 只统计字母
            char_freq[char] = char_freq.get(char, 0) + 1
    
    # 单词频率统计
    words = text.lower().split()
    # 去除标点符号
    import string
    words = [word.strip(string.punctuation) for word in words]
    word_freq = {}
    for word in words:
        if word:  # 忽略空字符串
            word_freq[word] = word_freq.get(word, 0) + 1
    
    # 找出最常见的字符和单词
    most_common_char = max(char_freq.items(), key=lambda x: x[1]) if char_freq else None
    most_common_word = max(word_freq.items(), key=lambda x: x[1]) if word_freq else None
    
    return {
        'char_count': char_count,
        'word_count': word_count,
        'line_count': line_count,
        'char_freq': char_freq,
        'word_freq': word_freq,
        'most_common_char': most_common_char,
        'most_common_word': most_common_word,
        'unique_chars': len(char_freq),
        'unique_words': len(word_freq)
    }

def main():
    """主函数"""
    # 示例文本
    text = """
    Python is a high-level programming language.
    Python is easy to learn and powerful.
    Python is used for web development, data science, and AI.
    """
    
    print("=" * 60)
    print("文本分析工具")
    print("=" * 60)
    
    stats = analyze_text(text)
    
    print(f"\n文本统计:")
    print(f"  字符数: {stats['char_count']}")
    print(f"  单词数: {stats['word_count']}")
    print(f"  行数: {stats['line_count']}")
    print(f"  唯一字符数: {stats['unique_chars']}")
    print(f"  唯一单词数: {stats['unique_words']}")
    
    if stats['most_common_char']:
        char, count = stats['most_common_char']
        print(f"\n最常见的字符: '{char}' (出现 {count} 次)")
    
    if stats['most_common_word']:
        word, count = stats['most_common_word']
        print(f"最常见的单词: '{word}' (出现 {count} 次)")
    
    # 显示字符频率（前 5 个）
    print("\n字符频率（前 5 个）:")
    sorted_chars = sorted(stats['char_freq'].items(), key=lambda x: x[1], reverse=True)
    for char, count in sorted_chars[:5]:
        print(f"  '{char}': {count}")

if __name__ == "__main__":
    main()
```

### Demo 3: 数据去重和统计工具

```python
#!/usr/bin/env python3
# data_processor.py - 数据去重和统计工具

def process_data(data_list):
    """
    处理数据：去重、统计、排序
    
    参数:
        data_list: 数据列表
    
    返回:
        处理后的数据字典
    """
    # 转换为集合去重
    unique_data = set(data_list)
    
    # 统计每个元素的出现次数
    frequency = {}
    for item in data_list:
        frequency[item] = frequency.get(item, 0) + 1
    
    # 排序（按频率降序）
    sorted_by_freq = sorted(frequency.items(), key=lambda x: x[1], reverse=True)
    
    return {
        'original_count': len(data_list),
        'unique_count': len(unique_data),
        'duplicates': len(data_list) - len(unique_data),
        'unique_items': sorted(unique_data),
        'frequency': frequency,
        'sorted_by_frequency': sorted_by_freq
    }

def main():
    """主函数"""
    # 示例数据（可能包含重复项）
    data = [1, 2, 3, 2, 4, 3, 5, 1, 2, 3, 4, 5, 1, 2, 3]
    
    print("=" * 60)
    print("数据去重和统计工具")
    print("=" * 60)
    
    print(f"\n原始数据: {data}")
    print(f"原始数据数量: {len(data)}")
    
    result = process_data(data)
    
    print(f"\n处理结果:")
    print(f"  唯一数据数量: {result['unique_count']}")
    print(f"  重复数据数量: {result['duplicates']}")
    print(f"  唯一数据列表: {result['unique_items']}")
    
    print(f"\n频率统计:")
    for item, count in result['sorted_by_frequency']:
        print(f"  {item}: {count} 次")
    
    # 使用列表推导式找出出现次数最多的元素
    max_freq = max(result['frequency'].values())
    most_frequent = [item for item, count in result['frequency'].items() if count == max_freq]
    print(f"\n出现次数最多的元素: {most_frequent} (出现 {max_freq} 次)")

if __name__ == "__main__":
    main()
```

## 下一步

完成数据类型学习后，建议学习：
1. [控制结构](./04-控制结构.md) - 条件语句和循环语句
2. [函数](./05-函数.md) - 函数定义和使用

