# 快速入门

## 环境搭建

### 安装 Python

#### macOS
```bash
# 方式1：使用 Homebrew（推荐）
brew install python3

# 方式2：从官网下载安装包
# https://www.python.org/downloads/

# 方式3：使用 pyenv 管理多个 Python 版本（推荐）
brew install pyenv
pyenv install 3.12.0
pyenv global 3.12.0
```

#### Linux
```bash
# Ubuntu/Debian
sudo apt-get update
sudo apt-get install python3 python3-pip

# CentOS/RHEL
sudo yum install python3 python3-pip

# 或从源码编译安装
wget https://www.python.org/ftp/python/3.12.0/Python-3.12.0.tgz
tar -xzf Python-3.12.0.tgz
cd Python-3.12.0
./configure --prefix=/usr/local
make && sudo make install
```

#### Windows
1. 访问 https://www.python.org/downloads/
2. 下载 Python 3.12+ 安装包
3. 运行安装程序，**勾选 "Add Python to PATH"**
4. 完成安装

### 验证安装

```bash
# 检查 Python 版本
python --version
# 或
python3 --version
# 输出：Python 3.12.x

# 检查 pip 版本
pip --version
# 或
pip3 --version
# 输出：pip 24.x.x

# 进入 Python 交互式环境
python
# 或
python3
```

### 配置环境变量

#### macOS/Linux
```bash
# 查看 Python 安装路径
which python3
# 输出：/usr/local/bin/python3

# 添加到 PATH（如果需要）
export PATH="/usr/local/bin:$PATH"

# 永久添加到 ~/.zshrc 或 ~/.bashrc
echo 'export PATH="/usr/local/bin:$PATH"' >> ~/.zshrc
source ~/.zshrc
```

#### Windows
在系统环境变量中添加 Python 安装目录到 PATH：
- `C:\Python312\`
- `C:\Python312\Scripts\`

## 第一个 Python 程序

### Hello World

创建文件 `hello.py`：

```python
# hello.py
# 这是 Python 的第一个程序

print("Hello, World!")
```

### 运行程序

```bash
# 方式1：使用 python 命令运行
python hello.py
# 或
python3 hello.py

# 方式2：使用交互式环境
python
>>> print("Hello, World!")
Hello, World!
>>> exit()

# 方式3：直接执行（需要添加 shebang）
# 在文件第一行添加：#!/usr/bin/env python3
chmod +x hello.py  # Linux/macOS
./hello.py
```

### 代码解析

```python
# 这是单行注释，以 # 开头

"""
这是多行注释（文档字符串）
可以写多行内容
"""

print("Hello, World!")  # print() 是内置函数，用于输出内容
```

**Python 特点**：
- 不需要分号结尾（除非一行多条语句）
- 使用缩进表示代码块（4 个空格或 1 个 Tab）
- 单引号和双引号都可以表示字符串
- 注释以 `#` 开头

### 与其他语言对比

| 语言 | Hello World |
|------|------------|
| **Python** | `print("Hello, World!")` |
| **Java** | `System.out.println("Hello, World!");` |
| **C++** | `std::cout << "Hello, World!" << std::endl;` |
| **JavaScript** | `console.log("Hello, World!");` |
| **Go** | `fmt.Println("Hello, World!")` |

**Python 优势**：
- 语法最简洁
- 无需编译，直接运行
- 不需要声明变量类型
- 代码可读性强

## Python 包管理（pip）

pip 是 Python 的包管理器，用于安装和管理第三方库。

### 基本使用

```bash
# 安装包
pip install package_name
# 或
pip3 install package_name

# 安装指定版本
pip install package_name==1.2.3

# 卸载包
pip uninstall package_name

# 列出已安装的包
pip list

# 查看包信息
pip show package_name

# 生成依赖文件
pip freeze > requirements.txt

# 从依赖文件安装
pip install -r requirements.txt

# 升级 pip
pip install --upgrade pip
```

### 配置国内镜像源（加速下载）

```bash
# 临时使用
pip install -i https://pypi.tuna.tsinghua.edu.cn/simple package_name

# 永久配置（推荐）
# macOS/Linux: 创建 ~/.pip/pip.conf
[global]
index-url = https://pypi.tuna.tsinghua.edu.cn/simple
trusted-host = pypi.tuna.tsinghua.edu.cn

# Windows: 创建 %APPDATA%\pip\pip.ini
```

## 虚拟环境（Virtual Environment）

虚拟环境用于隔离不同项目的依赖，避免版本冲突。

### 创建虚拟环境

```bash
# 方式1：使用 venv（Python 3.3+ 内置，推荐）
python3 -m venv venv
# 或
python -m venv venv

# 方式2：使用 virtualenv（需要先安装）
pip install virtualenv
virtualenv venv
```

### 激活虚拟环境

```bash
# macOS/Linux
source venv/bin/activate

# Windows
venv\Scripts\activate

# 激活后，命令行提示符会显示 (venv)
```

### 退出虚拟环境

```bash
deactivate
```

### 使用虚拟环境的最佳实践

```bash
# 1. 创建项目目录
mkdir myproject
cd myproject

# 2. 创建虚拟环境
python3 -m venv venv

# 3. 激活虚拟环境
source venv/bin/activate  # macOS/Linux
# 或
venv\Scripts\activate  # Windows

# 4. 安装依赖
pip install package1 package2

# 5. 生成依赖文件
pip freeze > requirements.txt

# 6. 退出虚拟环境
deactivate
```

## 实际应用场景 Demo

### Demo 1: 简单的命令行计算器

创建一个简单的命令行计算器：

```python
#!/usr/bin/env python3
# calc.py - 简单的命令行计算器

import sys  # 导入系统模块，用于访问命令行参数

def calculate(num1, operator, num2):
    """
    执行计算操作
    
    参数:
        num1: 第一个数字
        operator: 运算符（+、-、*、/）
        num2: 第二个数字
    
    返回:
        计算结果
    """
    # 根据运算符执行相应计算
    if operator == '+':
        return num1 + num2  # 加法
    elif operator == '-':
        return num1 - num2  # 减法
    elif operator == '*':
        return num1 * num2  # 乘法
    elif operator == '/':
        if num2 == 0:
            raise ValueError("除数不能为0")  # 抛出异常
        return num1 / num2  # 除法
    else:
        raise ValueError(f"不支持的运算符: {operator}")

def main():
    """主函数"""
    # 检查命令行参数数量：需要程序名 + 3 个参数
    if len(sys.argv) != 4:
        print("用法: python calc.py <num1> <operator> <num2>")
        print("示例: python calc.py 10 + 5")
        sys.exit(1)  # 参数错误，退出程序
    
    try:
        # 解析命令行参数
        num1 = float(sys.argv[1])  # 将字符串转换为浮点数
        operator = sys.argv[2]     # 运算符
        num2 = float(sys.argv[3])  # 将字符串转换为浮点数
        
        # 执行计算
        result = calculate(num1, operator, num2)
        
        # 输出结果，保留两位小数
        print(f"{num1} {operator} {num2} = {result:.2f}")
        
    except ValueError as e:
        # 捕获值错误（无效数字或运算符）
        print(f"错误: {e}")
        sys.exit(1)
    except Exception as e:
        # 捕获其他异常
        print(f"未知错误: {e}")
        sys.exit(1)

# 如果直接运行此脚本，执行 main 函数
if __name__ == "__main__":
    main()
```

**运行示例**：
```bash
python calc.py 10 + 5
# 输出: 10.0 + 5.0 = 15.00

python calc.py 10 / 3
# 输出: 10.0 / 3.0 = 3.33

python calc.py 10 / 0
# 输出: 错误: 除数不能为0
```

### Demo 2: 文件操作工具

创建一个简单的文件读取工具：

```python
#!/usr/bin/env python3
# cat.py - 简单的文件读取工具

import sys
import os  # 导入操作系统接口模块

def read_file(filename):
    """
    读取文件内容并打印
    
    参数:
        filename: 文件名
    """
    # 检查文件是否存在
    if not os.path.exists(filename):
        print(f"错误: 文件 '{filename}' 不存在")
        sys.exit(1)
    
    # 检查是否为文件（不是目录）
    if not os.path.isfile(filename):
        print(f"错误: '{filename}' 不是一个文件")
        sys.exit(1)
    
    try:
        # 打开文件并读取内容
        # 'r' 表示只读模式，encoding='utf-8' 指定编码
        with open(filename, 'r', encoding='utf-8') as f:
            content = f.read()  # 读取整个文件内容
            print(content)  # 打印内容
            
    except PermissionError:
        print(f"错误: 没有权限读取文件 '{filename}'")
        sys.exit(1)
    except Exception as e:
        print(f"错误: 读取文件时发生异常: {e}")
        sys.exit(1)

def main():
    """主函数"""
    # 检查是否提供了文件名参数
    if len(sys.argv) < 2:
        print("用法: python cat.py <文件名>")
        sys.exit(1)
    
    # 获取第一个参数作为文件名
    filename = sys.argv[1]
    read_file(filename)

if __name__ == "__main__":
    main()
```

**运行示例**：
```bash
# 创建测试文件
echo "Hello Python!" > test.txt

# 读取文件
python cat.py test.txt
# 输出: Hello Python!
```

### Demo 3: HTTP 服务器

创建一个简单的 HTTP 服务器：

```python
#!/usr/bin/env python3
# server.py - 简单的 HTTP 服务器

from http.server import HTTPServer, BaseHTTPRequestHandler
import json  # 导入 JSON 处理模块

class MyHandler(BaseHTTPRequestHandler):
    """自定义 HTTP 请求处理类"""
    
    def do_GET(self):
        """处理 GET 请求"""
        # 设置响应状态码
        self.send_response(200)
        # 设置响应头
        self.send_header('Content-type', 'application/json; charset=utf-8')
        self.end_headers()
        
        # 准备响应数据
        response_data = {
            'message': 'Hello, Python!',
            'path': self.path,  # 请求路径
            'method': 'GET',
            'status': 'success'
        }
        
        # 将字典转换为 JSON 字符串
        response_json = json.dumps(response_data, ensure_ascii=False, indent=2)
        
        # 发送响应（需要编码为字节）
        self.wfile.write(response_json.encode('utf-8'))
    
    def do_POST(self):
        """处理 POST 请求"""
        # 读取请求体长度
        content_length = int(self.headers['Content-Length'])
        # 读取请求体内容
        post_data = self.rfile.read(content_length)
        
        # 设置响应
        self.send_response(200)
        self.send_header('Content-type', 'application/json; charset=utf-8')
        self.end_headers()
        
        # 准备响应数据
        response_data = {
            'message': '收到 POST 请求',
            'received_data': post_data.decode('utf-8'),
            'status': 'success'
        }
        
        response_json = json.dumps(response_data, ensure_ascii=False, indent=2)
        self.wfile.write(response_json.encode('utf-8'))
    
    def log_message(self, format, *args):
        """自定义日志输出"""
        print(f"[{self.address_string()}] {format % args}")

def main():
    """主函数"""
    # 服务器地址和端口
    server_address = ('', 8080)
    
    # 创建 HTTP 服务器
    httpd = HTTPServer(server_address, MyHandler)
    
    print("服务器启动在 http://localhost:8080")
    print("按 Ctrl+C 停止服务器")
    
    try:
        # 启动服务器（阻塞运行）
        httpd.serve_forever()
    except KeyboardInterrupt:
        # 捕获 Ctrl+C 中断信号
        print("\n正在关闭服务器...")
        httpd.shutdown()  # 关闭服务器
        print("服务器已关闭")

if __name__ == "__main__":
    main()
```

**运行示例**：
```bash
# 启动服务器
python server.py
# 输出: 服务器启动在 http://localhost:8080

# 在另一个终端测试
curl http://localhost:8080
# 输出 JSON 响应

# 或使用浏览器访问 http://localhost:8080
```

## 开发工具推荐

### VS Code
- 安装 Python 扩展：`Python` (by Microsoft)
- 自动格式化、代码补全、调试支持
- 支持虚拟环境管理

### PyCharm
- JetBrains 出品的专业 Python IDE
- 社区版免费，专业版需要付费
- 功能强大，适合大型项目

### Jupyter Notebook
- 适合数据科学和交互式编程
- 安装：`pip install jupyter`
- 启动：`jupyter notebook`

### 命令行工具

```bash
# 格式化代码（需要安装 autopep8 或 black）
pip install autopep8
autopep8 --in-place --aggressive --aggressive hello.py

# 或使用 black（更严格的格式化）
pip install black
black hello.py

# 代码检查（需要安装 pylint）
pip install pylint
pylint hello.py

# 类型检查（需要安装 mypy）
pip install mypy
mypy hello.py

# 运行测试（使用 pytest）
pip install pytest
pytest test_*.py
```

## 下一步

完成快速入门后，建议学习：
1. [基础语法](./02-基础语法.md) - 变量、常量、基本语法规则
2. [数据类型](./03-数据类型.md) - Python 的各种数据类型

## 常见问题

### Q: Python 2 和 Python 3 有什么区别？
A: Python 3 是 Python 的未来，Python 2 已于 2020 年停止支持。本教程基于 Python 3。

### Q: 如何设置 Python 镜像源（国内用户）？
A: 
```bash
# 临时使用
pip install -i https://pypi.tuna.tsinghua.edu.cn/simple package_name

# 永久配置
# 创建 ~/.pip/pip.conf（macOS/Linux）或 %APPDATA%\pip\pip.ini（Windows）
```

### Q: 虚拟环境是必须的吗？
A: 强烈推荐使用虚拟环境，可以避免不同项目的依赖冲突。

### Q: 如何选择 Python IDE？
A: 
- 初学者：VS Code + Python 扩展
- 专业开发：PyCharm
- 数据科学：Jupyter Notebook

### Q: Python 程序如何打包成可执行文件？
A: 可以使用 PyInstaller：
```bash
pip install pyinstaller
pyinstaller --onefile hello.py
```

